tosca_definitions_version: tosca_simple_profile_for_nfv_1_0
description: Simple Virtual Router with one VDU

metadata:
  ID: vRouter-1-0-0
  vendor:  Acme
  version: 1.0

node_types:
  vRouterVNF:
  derived_from: tosca.nodes.nfv.VNF
  capabilities:
  forwarder_ingres:
  type: tosca.capabilities.nfv.Forwarder
  forwarder_egres:
  type: tosca.capabilities.nfv.Forwarder

vnfPackageLocation: https://gitlab.fokus.fraunhofer.de/openbaton/scripts-test-public.git
deploymentFlavour:
  # - flavour_key: m1.small Redundant ?
  - m1.small

interfaces:
    lifecycle: # lifecycle
        INSTANTIATE:
          - install.sh
        CONFIGURE:
          - server_configure_only.sh
        START:
           - iperf_client_start.sh

topology_template:
   inputs:
   substitution_mappings:

   node_templates:
     VDU1:
       type: tosca.nodes.nfv.VDU
       properties:
          vm_image:
           - ubuntu-14.04-server-cloudimg-amd64-disk1
          scale_in_out: 2
          vim_instance_name: vim-instance
       capabilities:
         nfv_compute:
           properties:
             mem_page_size: large
       artifacts:
        vRouterImage:
           type: tosca.artifacts.Deployment.Image.VM
           file: vdu1.image  #the VM image of VDU1
       interfaces:
         Standard:
           configure:
             implementation: vdu1_configure.sh

     CP12:
         type: tosca.nodes.nfv.CP
         properties:
             type: hhuh
             anti_spoof_protection: false
         requirements:
           virtualLink: InternalNetwork
           virtualBinding: VDU1
           floatingIP: 3

     CP13:
              type: tosca.nodes.nfv.CP
              properties:
                  type: hhuh
                  anti_spoof_protection: false
              requirements:
                virtualLink: InternalNetwork
                virtualBinding: VDU1
                floatingIP: 3


     private:
           type: tosca.nodes.nfv.VL
           properties:
             vendor: Fokus
           capabilities:
             virtual_linkable:
               valid_source_types: tosca.nodes.nfv.CP
